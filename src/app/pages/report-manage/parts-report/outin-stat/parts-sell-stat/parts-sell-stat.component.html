<!--component html goes here -->
<div id="parts-sell" @flyIn>
    <h4>配件销售统计</h4>
    <!--<form action="">-->
    <div class="history_top clearfix">
        <div class="col-md-3 bianma">
            <div class="input-group ">
                <span class="input-group-addon" id="sizing-addon2">配件编码</span>
                <!-- <input [(ngModel)]="searchParam.partsCode" type="text" class="form-control" placeholder="请输入配件编码" (focus)="partsSellReFocus('partsCode')"
                    (blur)="partsSellReBlur('partsCode')" (keyup)="partsSellReKeyUp($event,'partsCode')"> -->
                <input [(ngModel)]="partsParams.partsCode" type="text" class="form-control" placeholder="请输入配件编码" (click)='getflowinfo()'>
                <span class="input-group-addon defBgColor">
                    <i  class="fa fa-search"></i>
                </span>
                <!-- <ba-table [partsSellReTable]="partsSellTable" (gobackItem)="gobackItem($event)"></ba-table> -->
                <!--隐藏内容 start  -->
                <div class="stockhideinfo" *ngIf="isShow">
                    <table class="table table-hover table-sm table-bordered table-responsive">
                        <thead>
                            <tr>
                                <th style="width:20%">品牌</th>
                                <th style="width:20%">配件编码</th>
                                <th style="width:20%">配件分类</th>
                                <th style="width:20%">配件名称</th>
                                <th style="width:20%">规格型号</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of partstypelist" (click)='partsitem(item);'>
                                <td>{{item.brandName}}</td>
                                <td>{{item.partsCode}}</td>
                                <td>{{item.partsTypeName}}</td>
                                <td>{{item.partsName}}</td>
                                <td>{{item.partsSpec}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!--分页 start  -->
                    <!-- <div class="form-group paginate">
                        <pagination [totalItems]="totalItems[3]" [maxSize]="10" class="pagination-sm" [boundaryLinks]="true" previousText="&lsaquo;"
                        nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="paging($event,'partsinfo')"></pagination>
                                </div> -->
                    <!--分页 end  -->
                </div>
                <!--隐藏内容 end  -->
            </div>
        </div>
        <div class="col-md-3 bianma">
            <div class="input-group">
                <span class="input-group-addon" id="sizing-addon2">配件分类</span>
                <input [(ngModel)]="partsParams.partsTypeName" type="text" class="form-control" placeholder="请输入配件分类" (click)='partstypeinfo()'>
                <span class="input-group-addon defBgColor">
                    <i  class="fa fa-search"></i>
                </span>
                <!-- <ba-table [partsTypeName]="partsSellTypeName" (gobackItem)="gobackItem($event)"></ba-table> -->
                <!--隐藏内容 start  -->
                <div class="stockhideinfo" *ngIf="partstype">
                    <table class="table table-hover table-sm table-bordered table-responsive">
                        <thead>
                            <tr>
                                <th style="width:20%">品牌</th>
                                <th style="width:20%">配件编码</th>
                                <th style="width:20%">配件分类</th>
                                <th style="width:20%">配件名称</th>
                                <th style="width:20%">规格型号</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of partstypelist" (click)='partsitem(item);'>
                                <td>{{item.brandName}}</td>
                                <td>{{item.partsCode}}</td>
                                <td>{{item.partsTypeName}}</td>
                                <td>{{item.partsName}}</td>
                                <td>{{item.partsSpec}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!--分页 start  -->
                    <!-- <div class="form-group paginate">
                        <pagination [totalItems]="totalItems[3]" [maxSize]="10" class="pagination-sm" [boundaryLinks]="true" previousText="&lsaquo;"
                        nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="paging($event,'partsinfo')"></pagination>
                                </div> -->
                    <!--分页 end  -->
                </div>
                <!--隐藏内容 end  -->

            </div>
        </div>
        <div class="col-md-3 bianma">
            <div class="input-group">
                <span class="input-group-addon" id="sizing-addon2">配件名称</span>
                <input [(ngModel)]="partsParams.partsName" type="text" class="form-control" placeholder="请输入配件名称" (click)="partsName()">
                <span class="input-group-addon defBgColor">
                    <i  class="fa fa-search"></i>
                </span>
                <!-- <ba-table [partspartsName]="partsSellpartsName" (gobackItem)="gobackItem($event)"></ba-table> -->
                 <!--隐藏内容 start  -->
                <div class="stockhideinfo" *ngIf="partsNames">
                    <table class="table table-hover table-sm table-bordered table-responsive">
                        <thead>
                            <tr>
                                <th style="width:20%">品牌</th>
                                <th style="width:20%">配件编码</th>
                                <th style="width:20%">配件分类</th>
                                <th style="width:20%">配件名称</th>
                                <th style="width:20%">规格型号</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of partstypelist" (click)='partsitem(item);'>
                                <td>{{item.brandName}}</td>
                                <td>{{item.partsCode}}</td>
                                <td>{{item.partsTypeName}}</td>
                                <td>{{item.partsName}}</td>
                                <td>{{item.partsSpec}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!--分页 start  -->
                    <!-- <div class="form-group paginate">
                        <pagination [totalItems]="totalItems[3]" [maxSize]="10" class="pagination-sm" [boundaryLinks]="true" previousText="&lsaquo;"
                        nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="paging($event,'partsinfo')"></pagination>
                                </div> -->
                    <!--分页 end  -->
                </div>
                <!--隐藏内容 end  -->
            </div>
        </div>
        <div class="col-md-3 bianma">
            <div class="input-group">
                <span class="input-group-addon" id="sizing-addon2">客户名称</span>
                <input [(ngModel)]="partsParams.name" type="text" class="form-control" placeholder="请输入客户名称" (click)="cuNames()">
                <span class="input-group-addon defBgColor">
                    <i  class="fa fa-search"></i>
                </span>
                <!-- <ba-table [partsSellname]="partsSellname" (gobackItemName)="gobackItemName($event)"></ba-table> -->
                  <!--隐藏内容 start  -->
                <div class="stockhideinfo" *ngIf="Names">
                    <table class="table table-hover table-sm table-bordered table-responsive">
                        <thead>
                            <tr>
                                <th style="width:50%">客户名称</th>
                                <th style="width:50%">手机号码</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of partsselllist" (click)='partsitem(item);'>
                                 <td>{{item.name}}</td>
                                <td>{{item.mobile}}</td> 
                                
                            </tr>
                        </tbody>
                    </table>
                    <!--分页 start  -->
                    <!-- <div class="form-group paginate">
                        <pagination [totalItems]="totalItems[3]" [maxSize]="10" class="pagination-sm" [boundaryLinks]="true" previousText="&lsaquo;"
                        nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="paging($event,'partsinfo')"></pagination>
                                </div> -->
                    <!--分页 end  -->
                </div>
                <!--隐藏内容 end  -->
            </div>
        </div>
    </div>
    <div class="input_top_h">
        <div class="col-md-2">
            <div class="input-group">
                <span class="input-group-addon" id="sizing-addon2">客户手机</span>
                <input [(ngModel)]="partsParams.mobile" type="text" class="form-control" placeholder="请输入客户手机">
            </div>
        </div>
        <div class="col-md-6">
            <div class="input-group">
                <span class="input-group-addon" id="sizing-addon2">查询日期</span>
                <input [(ngModel)]="searchParam.beginTime" class="form-control" placeholder="请选择开始日期" (valueChanged)="timeChange()" ngui-datetime-picker
                    [close-on-select]="false">
                <span class="input-group-addon" id="sizing-addon2">-</span>
                <input [(ngModel)]="searchParam.endTime" class="form-control" placeholder="请选择结束日期" (valueChanged)="timeChange()" ngui-datetime-picker
                    [close-on-select]="false">
            </div>
            <div class="formInfo input-group bg-danger" *ngIf="timeError">
                无效的查询时间，开始时间要小于结束时间
            </div>
        </div>
        <div class="form-group">
            <button class="btn btn-primary" type="" (click)="search()" [disabled]='notSubmit'>查询</button>
        </div>
    </div>
    <!--</form>-->
    <hr/>

    <div class="history_main">
        <h4>温馨提示：系统为您找到<span class="red">{{totalItems}}</span>条记录</h4>
        <div class="history_main_w">
            <table class="table table-bordered text-center">
                <thead>
                    <tr>
                        <th>操作</th>
                        <th>单号</th>
                        <th>客户名称</th>
                        <th>客户手机</th>
                        <th>销售员</th>
                        <th>金额(元)</th>
                        <th>结账方式</th>
                        <th>开单时间</th>
                        <th>操作人</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let partsSell of partsselllist">
                        <td><button class="btn btn-info" type="text" (click)="partsdateils(partsSell.sellCode)">详情</button></td>
                        <td>{{partsSell.sellCode}}</td>
                        <td>{{partsSell.name}}</td>
                        <td>{{partsSell.mobile}}</td>
                        <td>{{partsSell.userName}}</td>
                        <td>{{partsSell.totalPrice}}</td>
                        <td>{{partsSell.settlementType}}</td>
                        <td>{{partsSell.createTime}}</td>
                        <td>{{partsSell.operUserName}}</td>
                    </tr>


                </tbody>
            </table>
        </div>
    </div>
    <div class="inventory_buttom clearfix">
        <div class="form-group paginate">
            <label>
                每页显示
                <select class="form-control select" (change)="pageChanged($event,'SELECT')">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
            </label>
            <pagination [totalItems]="totalItems" [(ngModel)]="index" [maxSize]="10" [itemsPerPage]="searchParam.pageSize" [boundaryLinks]="true"
                previousText="上一页" nextText="下一页" firstText="首页" lastText="尾页" (pageChanged)="pageChanged($event)"></pagination>
            <label class="contorl-label">
                跳转到<input type="number" class="form-control" min="1" [max]="maxPageSize" [(ngModel)]="choosePage">页
            </label>
            <button class="btn btn-default" (click)="pageChanged($event,'BUTTON')">GO</button>
        </div>
    </div>
    <div class="history_footer">
        <button class="btn btn-primary" type="submit">导出</button>
    </div>
</div>


<!--详情 模态框 start-->
<div bsModal #lgModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left"> 配件销售详情</h4>
                <button type="button" class="close pull-right" (click)="lgModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
            </div>
            <div class="modal-body">
                <div class="modal_main clearfix">
                    <div class="inventory_modal">

                        <div class="repair_his_content">
                            <table class="table table-bordered text-center">
                                <tbody>
                                    <tr>
                                        <td width="25%">单号</td>
                                        <td width="25%">{{partsSellid.sellCode}}</td>
                                        <td width="25%">客户名称：</td>
                                        <td width="25%">{{partsSellid.customerName}}</td>
                                    </tr>
                                    <tr>
                                        <td>开单时间：</td>
                                        <td>{{partsSellid.createTime}}</td>
                                        <td>操作人：</td>
                                        <td>{{partsSellid.operUserName}}</td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class="repair_his_bill">
                            <table class="table table-bordered text-center">
                                <thead>
                                    <tr>
                                        <th>配件编码</th>
                                        <th>配件分类</th>
                                        <th>配件名称</th>
                                        <th>品牌</th>
                                        <th>规格型号</th>
                                        <th>单位</th>
                                        <th>仓库</th>
                                        <th>库位</th>
                                        <th>单价（元）</th>
                                        <th>数量</th>
                                        <th>金额（元）</th>
                                        <th>备注</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{partsSellid.sellCode}}</td>
                                        <td>{{searchtableuser.partsTypeName}}</td>
                                        <td>{{searchtableuser.partsName}}</td>
                                        <td>{{searchtableuser.brandName}}</td>
                                        <td>{{searchtableuser.partsSpec}}</td>
                                        <td>{{searchtableuser.partsUnit}}</td>
                                        <td>{{partsSellid.depotName}}</td>
                                        <td>{{partsSellid.depotPosName}}</td>
                                        <td>{{partsSellid.price}}</td>
                                        <td>{{partsSellid.count}}</td>
                                        <td>{{partsSellid.totalPrice}}</td>
                                        <td>{{partsSellid.remark}}</td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>

                        <div class="button clearfix">
                            <button class="btn btn-primary" type="submit" (click)="lgModal.hide();orderPrint()">打印</button>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<!--详情 模态框 end-->

<div class="printgoods">
    <div class="printHeader">
        <img src="../../../../../assets/img/login_logo.png" alt="">
    </div>
    <div class="printContnet">
        <div class="repair_his_content">
            <table class="table table-bordered text-center">
                <tbody>
                    <tr>
                        <td width="25%">单号</td>
                        <td width="25%">{{partsSellid.sellCode}}</td>
                        <td width="25%">客户名称：</td>
                        <td width="25%">{{partsSellid.customerName}}</td>
                    </tr>
                    <tr>
                        <td>开单时间：</td>
                        <td>{{partsSellid.createTime}}</td>
                        <td>操作人：</td>
                        <td>{{partsSellid.operUserName}}</td>
                    </tr>

                </tbody>
            </table>
        </div>
        <div class="repair_his_bill">
            <table class="table table-bordered text-center">
                <thead>
                    <tr>
                        <th>配件编码</th>
                        <th>配件分类</th>
                        <th>配件名称</th>
                        <th>品牌</th>
                        <th>规格型号</th>
                        <th>单位</th>
                        <th>仓库</th>
                        <th>库位</th>
                        <th>单价（元）</th>
                        <th>数量</th>
                        <th>金额（元）</th>
                        <th>备注</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{partsSellid.sellCode}}</td>
                        <td>{{searchtableuser.partsTypeName}}</td>
                        <td>{{searchtableuser.partsName}}</td>
                        <td>{{searchtableuser.brandName}}</td>
                        <td>{{searchtableuser.partsSpec}}</td>
                        <td>{{searchtableuser.partsUnit}}</td>
                        <td>{{partsSellid.depotName}}</td>
                        <td>{{partsSellid.depotPosName}}</td>
                        <td>{{partsSellid.price}}</td>
                        <td>{{partsSellid.count}}</td>
                        <td>{{partsSellid.totalPrice}}</td>
                        <td>{{partsSellid.remark}}</td>
                    </tr>
                </tbody>

            </table>
        </div>
    </div>
</div>